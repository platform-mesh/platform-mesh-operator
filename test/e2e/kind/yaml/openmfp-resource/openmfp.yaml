apiVersion: core.openmfp.org/v1alpha1
kind: OpenMFP
metadata:
  name: openmfp
  namespace: openmfp-system
spec:
  # renovate: datasource=docker registryUrl=https://ghcr.io depName=ghcr.io/openmfp/helm-charts-priv/openmfp-operator-components
  chartVersion: 0.1.28
  values:
    apeiro-portal:
      enabled: false
    observability:
      enabled: false
    kcp:
      values:
        istio:
          hosts:
            - kcp.api.portal.dev.local
        kcp:
          externalHostname: kcp.api.portal.dev.local
          certificates:
            dnsNames:
              - localhost
              - kcp.api.portal.dev.local
          kcp:
            hostAliases:
              enabled: true
              values:
                - ip: "10.96.0.100"
                  hostnames:
                    - "kcp.api.portal.dev.local"
            kcpFrontProxy:
              service:
                clusterIP: "10.96.0.100"
    fga-operator:
      values:
        hostAliases:
          enabled: true
          items:
            - ip: 10.96.0.100
              hostnames:
                - kcp.api.portal.dev.local
    portal:
      values:
        health:
          port: 9091
    keycloak:
      values:
        keycloak:
          resources:
            requests:
              cpu: 100m
              memory: 512Mi
            limits:
              cpu: 500m
              memory: 1.2Gi
          extraEnvVars:
            - name: JAVA_OPTS_APPEND
              value: |-
                -Xms512m -Xmx1G
                -Djgroups.dns.query=keycloak-headless.openmfp-system.svc.cluster.local
            - name: KC_PROXY_HEADERS
              value: xforwarded
            - name: KC_HOSTNAME_STRICT
              value: "false"


