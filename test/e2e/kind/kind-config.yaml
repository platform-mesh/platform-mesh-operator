# TODO: Check if this file is needed for the cluster creation
apiVersion: kind.x-k8s.io/v1alpha4
kind: Cluster
kubeadmConfigPatches:
  - |
    kind: ClusterConfiguration
    metadata:
      name: config
    apiServer:
      extraArgs:
        authorization-config: /config/authorization-webhook-config.yaml
      extraVolumes:
        - name: api-server-basic-auth-files
          hostPath: "/config"
          mountPath: "/config"
          readOnly: true
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 30000
    hostPort: 8000
    protocol: TCP
    listenAddress: "127.0.0.1"
  - containerPort: 31000
    hostPort: 8443
    protocol: TCP
    listenAddress: "127.0.0.1"
  - containerPort: 31000
    hostPort: 443
    protocol: TCP
    listenAddress: "127.0.0.1"
  - containerPort: 32000
    hostPort: 15021
    protocol: TCP
    listenAddress: "127.0.0.1"
  extraMounts:
  - hostPath: ../kind/webhook-config
    containerPath: /config
    readOnly: true
    selinuxRelabel: true
